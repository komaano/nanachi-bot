"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.commonfy=exports.search=exports.forSite=void 0;const Constants_1=require("./Constants"),util_1=require("util"),Booru_1=__importDefault(require("./boorus/Booru")),Derpibooru_1=__importDefault(require("./boorus/Derpibooru")),XmlBooru_1=__importDefault(require("./boorus/XmlBooru")),Site_1=__importDefault(require("./structures/Site")),Utils_1=require("./Utils"),BooruTypes={derpi:Derpibooru_1.default,xml:XmlBooru_1.default},booruCache={};function booruFrom(e,r){return new(void 0!==e.type&&BooruTypes[e.type]?BooruTypes[e.type]:Booru_1.default)(e,r)}function booruForSite(e,r=null){const o=Utils_1.resolveSite(e);if(!o)throw new Constants_1.BooruError("Site not supported");return booruFrom(new Site_1.default(Constants_1.sites[o]),r)}function search(e,r=[],{limit:o=1,random:t=!1,page:s=0,credentials:n=null,showUnavailable:u=!1}={}){const i=Utils_1.resolveSite(e);if("string"==typeof o&&(o=parseInt(o,10)),null===i)throw new Constants_1.BooruError("Site not supported");if(!Array.isArray(r)&&"string"!=typeof r)throw new Constants_1.BooruError("`tags` should be an array or string");if("number"!=typeof o||Number.isNaN(o))throw new Constants_1.BooruError("`limit` should be an int");const a=new Site_1.default(Constants_1.sites[i]);return booruCache[i]||(booruCache[i]=booruFrom(a)),booruCache[i].search(r,{limit:o,random:t,page:s,credentials:n})}exports.forSite=booruForSite,exports.default=booruForSite,exports.search=search;const deprecatedCommonfy=util_1.deprecate(()=>{},"Common is now deprecated, just access the properties directly");function commonfy(e){return deprecatedCommonfy(),Promise.resolve(e)}exports.commonfy=commonfy;var Booru_2=require("./boorus/Booru");Object.defineProperty(exports,"BooruClass",{enumerable:!0,get:function(){return Booru_2.Booru}});var Constants_2=require("./Constants");Object.defineProperty(exports,"sites",{enumerable:!0,get:function(){return Constants_2.sites}});var Utils_2=require("./Utils");Object.defineProperty(exports,"resolveSite",{enumerable:!0,get:function(){return Utils_2.resolveSite}});var Constants_3=require("./Constants");Object.defineProperty(exports,"BooruError",{enumerable:!0,get:function(){return Constants_3.BooruError}});